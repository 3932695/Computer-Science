<!DOCTYPE HTML PUBLIC "-//W3O//DTD W3 HTML 2.0//EN">
<!Converted with LaTeX2HTML 95.1 (Fri Jan 20 1995) by Nikos Drakos (nikos@cbl.leeds.ac.uk), CBLU, University of Leeds >
<HEAD>
<TITLE>10.3 Distributed Random Generators</TITLE>
</HEAD>
<BODY>
<meta name="description" value="10.3 Distributed Random Generators">
<meta name="keywords" value="book">
<meta name="resource-type" value="document">
<meta name="distribution" value="global">
<P>
 <BR> <HR><a href="../../../tppmsgs/msgs0.htm#1" tppabs="http://www.mcs.anl.gov/dbpp/"><img ALIGN=MIDDLE src="pictures//asm_color_tiny.gif" tppabs="http://www.mcs.anl.gov/dbpp/text/pictures//asm_color_tiny.gif" alt="[DBPP]"></a>    <A NAME=tex2html3417 HREF="node118.html" tppabs="http://www.mcs.anl.gov/dbpp/text/node118.html"><IMG ALIGN=MIDDLE ALT="previous" SRC="pictures//previous_motif.gif" tppabs="http://www.mcs.anl.gov/dbpp/text/pictures//previous_motif.gif"></A> <A NAME=tex2html3425 HREF="node120.html" tppabs="http://www.mcs.anl.gov/dbpp/text/node120.html"><IMG ALIGN=MIDDLE ALT="next" SRC="pictures//next_motif.gif" tppabs="http://www.mcs.anl.gov/dbpp/text/pictures//next_motif.gif"></A> <A NAME=tex2html3423 HREF="node116.html" tppabs="http://www.mcs.anl.gov/dbpp/text/node116.html"><IMG ALIGN=MIDDLE ALT="up" SRC="pictures//up_motif.gif" tppabs="http://www.mcs.anl.gov/dbpp/text/pictures//up_motif.gif"></A> <A NAME=tex2html3427 HREF="node1.html" tppabs="http://www.mcs.anl.gov/dbpp/text/node1.html"><IMG ALIGN=MIDDLE ALT="contents" SRC="pictures//contents_motif.gif" tppabs="http://www.mcs.anl.gov/dbpp/text/pictures//contents_motif.gif"></A> <A NAME=tex2html3428 HREF="node133.html" tppabs="http://www.mcs.anl.gov/dbpp/text/node133.html"><IMG ALIGN=MIDDLE ALT="index" SRC="pictures//index_motif.gif" tppabs="http://www.mcs.anl.gov/dbpp/text/pictures//index_motif.gif"></A> <a href="../../../tppmsgs/msgs0.htm#2" tppabs="http://www.mcs.anl.gov/dbpp/search.html"><img ALIGN=MIDDLE src="pictures//search_motif.gif" tppabs="http://www.mcs.anl.gov/dbpp/text/pictures//search_motif.gif" alt="[Search]"></a>   <BR>
<B> Next:</B> <A NAME=tex2html3426 HREF="node120.html" tppabs="http://www.mcs.anl.gov/dbpp/text/node120.html">10.4 Summary</A>
<B>Up:</B> <A NAME=tex2html3424 HREF="node116.html" tppabs="http://www.mcs.anl.gov/dbpp/text/node116.html">10 Random Numbers</A>
<B> Previous:</B> <A NAME=tex2html3418 HREF="node118.html" tppabs="http://www.mcs.anl.gov/dbpp/text/node118.html">10.2 Parallel Random Numbers</A>
<BR><HR><P>
<H1><A NAME=SECTION04230000000000000000>10.3 Distributed Random Generators</A></H1>
<P>
The techniques described here for constructing distributed random
<A NAME=14665>&#160;</A>
number generators are based on an adaptation of the linear
congruential algorithm called the <em> random tree
 </em> method.  We
first show how this method can be applied to a single generator to
construct a tree of generators in a deterministic and reproducible
fashion.  This facility is particularly valuable in computations that
create and destroy tasks dynamically during program execution.
<P>
<H2><A NAME=SECTION04231000000000000000>10.3.1 The Random Tree Method</A></H2>
<P>
The random tree method employs two linear congruential generators,
<A NAME=14668>&#160;</A>
<em> L</em>
 and <em> R</em>
, that differ only in the values used for
<A NAME=14671>&#160;</A>
<em> a</em>
.
<P><IMG BORDER=0 ALIGN=BOTTOM ALT="" SRC="img1079.gif" tppabs="http://www.mcs.anl.gov/dbpp/text/img1079.gif"><P>
<P>
<P><A NAME=14849>&#160;</A><IMG BORDER=0 ALIGN=BOTTOM ALT="" SRC="img1080.gif" tppabs="http://www.mcs.anl.gov/dbpp/text/img1080.gif">
<BR><STRONG>Figure 10.1:</STRONG> <em> The random tree method.  Two generators are
used to construct a tree of random numbers.  The right generator is
applied to elements of the sequence <em> L</em>
 generated by the left
generator to generate new sequences <em> R</em>
, <em> R'</em>
,
<em> R''</em>
, etc.</em><A NAME=figlat3>&#160;</A><BR>
<P>
<P>
<A NAME=14686>&#160;</A>
Application of the left generator <em> L</em>
 to a seed <IMG BORDER=0 ALIGN=MIDDLE ALT="" SRC="img1081.gif" tppabs="http://www.mcs.anl.gov/dbpp/text/img1081.gif"> generates
one random sequence; application of the right generator <em> R</em>
 to the
same seed generates a different sequence.  By applying the right
generator to elements of the left generator's sequence (or vice
versa), a tree of random numbers can be generated.  By convention, the
right generator <em> R</em>
 is used to generate random values for use in
computation, while the left generator <em> L</em>
 is applied to values
computed by <em> R</em>
 to obtain the starting points <IMG BORDER=0 ALIGN=BOTTOM ALT="" SRC="img1082.gif" tppabs="http://www.mcs.anl.gov/dbpp/text/img1082.gif">, <IMG BORDER=0 ALIGN=BOTTOM ALT="" SRC="img1083.gif" tppabs="http://www.mcs.anl.gov/dbpp/text/img1083.gif">, etc.,
for new right sequences (Figure <A HREF="node119.html#figlat3" tppabs="http://www.mcs.anl.gov/dbpp/text/node119.html#figlat3">10.1</A>).
<P>
The strength of the random tree method is that it can be used to
<A NAME=14693>&#160;</A>
generate new random sequences in a reproducible and noncentralized
fashion.  This is valuable, for example, in applications in which new
tasks and hence new random generators must be created dynamically.
Before creating a new task, a parent task uses the left generator to
construct a new right generator, which it passes to its new offspring.
The new task uses this right generator to generate the random numbers
required for its computation.  If it in turn must generate a new task,
it can apply the left generator to its latest random value to obtain a
new random seed.
<P>
A deficiency of the random tree method as described here is that there
is no guarantee that different right sequences will not overlap.  The
period of <em> R</em>
 is usually chosen to be near to <em> m</em>
, because
this maximizes the quality of the random numbers obtained by using the
generator.  Hence, the starting points <IMG BORDER=0 ALIGN=BOTTOM ALT="" SRC="img1084.gif" tppabs="http://www.mcs.anl.gov/dbpp/text/img1084.gif"> returned by the left
generator are likely to be different points in the same sequence, in
which case we can think of <em> L</em>
 as selecting random starting points
in the sequence constructed by <em> R</em>
.  If two starting points happen
to be close to each other, the two right sequences that are generated
will be highly correlated.
<P>
<H2><A NAME=SECTION04232000000000000000>10.3.2 The Leapfrog Method</A></H2>
<P>
In some circumstances, we may know that a program requires a fixed
number of generators.  (For example, we may require one generator for
<A NAME=14699>&#160;</A>
each task in a domain decomposition algorithm.)  In this case, a
<A NAME=14700>&#160;</A>
variant of the random tree method called the <em> leapfrog
 </em>
method can be used to generate sequences that can be guaranteed not to
overlap for a certain period.
<P>
Let <em> n</em>
 be the number of sequences required.  Then we
define <IMG BORDER=0 ALIGN=MIDDLE ALT="" SRC="img1085.gif" tppabs="http://www.mcs.anl.gov/dbpp/text/img1085.gif"> and <IMG BORDER=0 ALIGN=MIDDLE ALT="" SRC="img1086.gif" tppabs="http://www.mcs.anl.gov/dbpp/text/img1086.gif"> as <em> a</em>
 and <IMG BORDER=0 ALIGN=BOTTOM ALT="" SRC="img1087.gif" tppabs="http://www.mcs.anl.gov/dbpp/text/img1087.gif">, respectively, so that we
have
<P><IMG BORDER=0 ALIGN=BOTTOM ALT="" SRC="img1088.gif" tppabs="http://www.mcs.anl.gov/dbpp/text/img1088.gif"><P>
Then, we create <em> n</em>
 different right generators <IMG BORDER=0 ALIGN=BOTTOM ALT="" SRC="img1089.gif" tppabs="http://www.mcs.anl.gov/dbpp/text/img1089.gif">..<IMG BORDER=0 ALIGN=BOTTOM ALT="" SRC="img1090.gif" tppabs="http://www.mcs.anl.gov/dbpp/text/img1090.gif"> by
taking the first <em> n</em>
 elements of <em> L</em>
 as their starting values.
The name ``leapfrog method'' refers to the fact that the <em> i</em>
th
sequence <IMG BORDER=0 ALIGN=BOTTOM ALT="" SRC="img1091.gif" tppabs="http://www.mcs.anl.gov/dbpp/text/img1091.gif"> consists of <IMG BORDER=0 ALIGN=MIDDLE ALT="" SRC="img1092.gif" tppabs="http://www.mcs.anl.gov/dbpp/text/img1092.gif"> and every <em> n</em>
th subsequent
element of the sequence generated by <em> L</em>
 (Figure <A HREF="node119.html#figlat5" tppabs="http://www.mcs.anl.gov/dbpp/text/node119.html#figlat5">10.2</A>).
As this method partitions the elements of <em> L</em>
, each subsequence
has a period of at least <em> P/n</em>
, where <em> P</em>
 is the period of
<em> L</em>
.  (If <em> n</em>
 divides <em> P</em>
, then the period of a
subsequence is exactly <em> P/n</em>
.)  In addition, the
<em> n</em>
 subsequences are disjoint for their first <em> P/n</em>
 elements.
<P>
<P><A NAME=14895>&#160;</A><IMG BORDER=0 ALIGN=BOTTOM ALT="" SRC="img1093.gif" tppabs="http://www.mcs.anl.gov/dbpp/text/img1093.gif">
<BR><STRONG>Figure 10.2:</STRONG> <em> The leapfrog method with <em> n=3</em>
.  Each of the three right
generators selects a disjoint subsequence of the sequence constructed
by the left generator's sequence.</em><A NAME=figlat5>&#160;</A><BR>
<P>
<P>
<A NAME=14731>&#160;</A>
<P>
The generator for the <em> r</em>
th subsequence, <IMG BORDER=0 ALIGN=BOTTOM ALT="" SRC="img1094.gif" tppabs="http://www.mcs.anl.gov/dbpp/text/img1094.gif">, is defined by
<IMG BORDER=0 ALIGN=BOTTOM ALT="" SRC="img1095.gif" tppabs="http://www.mcs.anl.gov/dbpp/text/img1095.gif"> and <IMG BORDER=0 ALIGN=MIDDLE ALT="" SRC="img1096.gif" tppabs="http://www.mcs.anl.gov/dbpp/text/img1096.gif">.  We can compute these values as follows.
We first compute <IMG BORDER=0 ALIGN=BOTTOM ALT="" SRC="img1097.gif" tppabs="http://www.mcs.anl.gov/dbpp/text/img1097.gif"> and <IMG BORDER=0 ALIGN=BOTTOM ALT="" SRC="img1098.gif" tppabs="http://www.mcs.anl.gov/dbpp/text/img1098.gif">; these computations can be performed
in <IMG BORDER=0 ALIGN=MIDDLE ALT="" SRC="img1099.gif" tppabs="http://www.mcs.anl.gov/dbpp/text/img1099.gif"> time by taking advantage of the identity
<P><IMG BORDER=0 ALIGN=BOTTOM ALT="" SRC="img1100.gif" tppabs="http://www.mcs.anl.gov/dbpp/text/img1100.gif"><P>
We then compute members of the sequence <IMG BORDER=0 ALIGN=BOTTOM ALT="" SRC="img1101.gif" tppabs="http://www.mcs.anl.gov/dbpp/text/img1101.gif"> as follows, to obtain
<em> n</em>
 generators, each defined by a triple <IMG BORDER=0 ALIGN=MIDDLE ALT="" SRC="img1102.gif" tppabs="http://www.mcs.anl.gov/dbpp/text/img1102.gif">, for <IMG BORDER=0 ALIGN=MIDDLE ALT="" SRC="img1103.gif" tppabs="http://www.mcs.anl.gov/dbpp/text/img1103.gif">.
<P><IMG BORDER=0 ALIGN=BOTTOM ALT="" SRC="img1104.gif" tppabs="http://www.mcs.anl.gov/dbpp/text/img1104.gif"><P>
<P>
The leapfrog method can be applied recursively: the subsequence
corresponding to a generator <IMG BORDER=0 ALIGN=MIDDLE ALT="" SRC="img1105.gif" tppabs="http://www.mcs.anl.gov/dbpp/text/img1105.gif"> can be further subdivided
by a second application of the leapfrog method.  Doing this can be
useful when random numbers are required at several levels in a task
hierarchy.  However, the periods of the resulting sequences become
shorter, and their statistical properties are less certain.
<P>
<H2><A NAME=SECTION04233000000000000000>10.3.3 Modified Leapfrog</A></H2>
<P>
In other situations, we may know the maximum number, <em> n</em>
, of
<A NAME=14750>&#160;</A>
random values needed in a subsequence but not the number of
<A NAME=14751>&#160;</A>
subsequences required.  In this case, a variant of the leapfrog method
can be used in which the role of <em> L</em>
 and <em> R</em>
 are reversed so
that the elements of subsequence <em> i</em>
 are the contiguous elements
<IMG BORDER=0 ALIGN=MIDDLE ALT="" SRC="img1106.gif" tppabs="http://www.mcs.anl.gov/dbpp/text/img1106.gif">..<IMG BORDER=0 ALIGN=MIDDLE ALT="" SRC="img1107.gif" tppabs="http://www.mcs.anl.gov/dbpp/text/img1107.gif"> (Figure <A HREF="node119.html#figml" tppabs="http://www.mcs.anl.gov/dbpp/text/node119.html#figml">10.3</A>), as follows:
<P><IMG BORDER=0 ALIGN=BOTTOM ALT="" SRC="img1108.gif" tppabs="http://www.mcs.anl.gov/dbpp/text/img1108.gif"><P>
It is not a good idea to choose <em> n</em>
 as a power of two, as this can
lead to serious long-term correlations.
<P>
<P><A NAME=14920>&#160;</A><IMG BORDER=0 ALIGN=BOTTOM ALT="" SRC="img1109.gif" tppabs="http://www.mcs.anl.gov/dbpp/text/img1109.gif">
<BR><STRONG>Figure 10.3:</STRONG> <em> Modified leapfrog with <em> n=3</em>
.  Each subsequence contains
three contiguous numbers from the main
sequence.</em><A NAME=figml>&#160;</A><BR>
<P>
<P>

<BR> <HR><a href="../../../tppmsgs/msgs0.htm#1" tppabs="http://www.mcs.anl.gov/dbpp/"><img ALIGN=MIDDLE src="pictures//asm_color_tiny.gif" tppabs="http://www.mcs.anl.gov/dbpp/text/pictures//asm_color_tiny.gif" alt="[DBPP]"></a>    <A NAME=tex2html3417 HREF="node118.html" tppabs="http://www.mcs.anl.gov/dbpp/text/node118.html"><IMG ALIGN=MIDDLE ALT="previous" SRC="pictures//previous_motif.gif" tppabs="http://www.mcs.anl.gov/dbpp/text/pictures//previous_motif.gif"></A> <A NAME=tex2html3425 HREF="node120.html" tppabs="http://www.mcs.anl.gov/dbpp/text/node120.html"><IMG ALIGN=MIDDLE ALT="next" SRC="pictures//next_motif.gif" tppabs="http://www.mcs.anl.gov/dbpp/text/pictures//next_motif.gif"></A> <A NAME=tex2html3423 HREF="node116.html" tppabs="http://www.mcs.anl.gov/dbpp/text/node116.html"><IMG ALIGN=MIDDLE ALT="up" SRC="pictures//up_motif.gif" tppabs="http://www.mcs.anl.gov/dbpp/text/pictures//up_motif.gif"></A> <A NAME=tex2html3427 HREF="node1.html" tppabs="http://www.mcs.anl.gov/dbpp/text/node1.html"><IMG ALIGN=MIDDLE ALT="contents" SRC="pictures//contents_motif.gif" tppabs="http://www.mcs.anl.gov/dbpp/text/pictures//contents_motif.gif"></A> <A NAME=tex2html3428 HREF="node133.html" tppabs="http://www.mcs.anl.gov/dbpp/text/node133.html"><IMG ALIGN=MIDDLE ALT="index" SRC="pictures//index_motif.gif" tppabs="http://www.mcs.anl.gov/dbpp/text/pictures//index_motif.gif"></A> <a href="../../../tppmsgs/msgs0.htm#2" tppabs="http://www.mcs.anl.gov/dbpp/search.html"><img ALIGN=MIDDLE src="pictures//search_motif.gif" tppabs="http://www.mcs.anl.gov/dbpp/text/pictures//search_motif.gif" alt="[Search]"></a>   <BR>
<B> Next:</B> <A NAME=tex2html3426 HREF="node120.html" tppabs="http://www.mcs.anl.gov/dbpp/text/node120.html">10.4 Summary</A>
<B>Up:</B> <A NAME=tex2html3424 HREF="node116.html" tppabs="http://www.mcs.anl.gov/dbpp/text/node116.html">10 Random Numbers</A>
<B> Previous:</B> <A NAME=tex2html3418 HREF="node118.html" tppabs="http://www.mcs.anl.gov/dbpp/text/node118.html">10.2 Parallel Random Numbers</A>
<BR><HR><P>
<P><ADDRESS>
<I>&#169 Copyright 1995 by <A href="../../../tppmsgs/msgs0.htm#3" tppabs="http://www.mcs.anl.gov/people/foster/">Ian Foster</a></I>
</ADDRESS>
</BODY>
